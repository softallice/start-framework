(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"33c3":function(a,e,t){},"8c2d":function(a,e,t){"use strict";t.r(e);var s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("q-page",{staticClass:"row justify-center items-center content-center"},[a.showProfile?a._e():t("div",{staticClass:"col-lg-8"},[t("q-form",{staticClass:"q-gutter-md q-mt-sm",on:{submit:a.onSubmit}},[t("div",{staticClass:"row justify-start items-start"},[t("p",{staticClass:"q-ma-sm body-1 col-12"},[a._v("\n            Update your Profile\n          ")]),t("div",{staticClass:"col-12 col-md-6"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"",value:a.currentEmail,label:"Email","label-color":"accent",dense:"",hint:"Email verification will be required to update email.",disable:""},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-user",size:"xs"}})]},proxy:!0}],null,!1,2110841006)})],1),t("div",{staticClass:"col-12 col-md-6"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"",value:a.currentDid,label:"DID","label-color":"accent",dense:"",hint:"DID is unique.",disable:""},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-user",size:"xs"}})]},proxy:!0}],null,!1,2110841006)})],1),t("div",{staticClass:"col-12 col-md-6"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"",value:a.currentPushToken,label:"PushToken","label-color":"accent",dense:"",hint:"PushToken is unique.",disable:""},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-user",size:"xs"}})]},proxy:!0}],null,!1,2110841006)})],1),t("div",{staticClass:"col-12 col-md-6 text-right"},[t("q-btn",{staticClass:"q-ma-sm q-pa-xs",attrs:{color:"primary",dense:""},on:{click:function(e){a.showUpdateEmail=!0}}},[a._v("Update Email")]),t("q-btn",{staticClass:"q-ma-sm q-pa-xs",attrs:{color:"accent",dense:""},on:{click:function(e){a.showUpdatePwd=!0}}},[a._v("Update Password")])],1),t("div",{staticClass:"col-12 col-md-6"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"",label:"First Name","label-color":"accent",hint:"Given Name","lazy-rules":"",dense:"",error:a.$v.profileData.firstname.$invalid&&a.$v.profileData.firstname.$dirty},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-user",size:"xs"}})]},proxy:!0},{key:"error",fn:function(){return[a.$v.profileData.firstname.required?a._e():t("div",[a._v("\n                  This field is required.\n                ")]),a.$v.profileData.firstname.minLength?a._e():t("div",[a._v("\n                  Must contain at least 2 characters.\n                ")]),a.$v.profileData.firstname.maxLength?a._e():t("div",[a._v("\n                  Cannot be over 30 characters.\n                ")])]},proxy:!0}],null,!1,2055912656),model:{value:a.$v.profileData.firstname.$model,callback:function(e){a.$set(a.$v.profileData.firstname,"$model",e)},expression:"$v.profileData.firstname.$model"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"",label:"Family Name","label-color":"accent",hint:"Surname","lazy-rules":"",dense:"",error:a.$v.profileData.lastname.$invalid&&a.$v.profileData.lastname.$dirty,"error-message":"Must be at least 2 characters"},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-user",size:"xs"}})]},proxy:!0},{key:"error",fn:function(){return[a.$v.profileData.lastname.required?a._e():t("div",[a._v("\n                  This field is required.\n                ")]),a.$v.profileData.lastname.minLength?a._e():t("div",[a._v("\n                  Must contain at least 2 characters.\n                ")]),a.$v.profileData.lastname.maxLength?a._e():t("div",[a._v("\n                  Cannot be over 30 characters.\n                ")])]},proxy:!0}],null,!1,3830523872),model:{value:a.$v.profileData.lastname.$model,callback:function(e){a.$set(a.$v.profileData.lastname,"$model",e)},expression:"$v.profileData.lastname.$model"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"",label:"Company","label-color":"accent","lazy-rules":"",dense:"",error:a.$v.profileData.company.$invalid&&a.$v.profileData.company.$dirty},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-building",size:"xs"}})]},proxy:!0},{key:"error",fn:function(){return[a.$v.profileData.company.minLength?a._e():t("div",[a._v("\n                  Must contain at least 2 characters.\n                ")]),a.$v.profileData.company.maxLength?a._e():t("div",[a._v("\n                  Cannot be over 30 characters.\n                ")])]},proxy:!0}],null,!1,2188570027),model:{value:a.$v.profileData.company.$model,callback:function(e){a.$set(a.$v.profileData.company,"$model",e)},expression:"$v.profileData.company.$model"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"",label:"City","label-color":"accent","lazy-rules":"",dense:"",error:a.$v.profileData.city.$invalid&&a.$v.profileData.city.$dirty},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-city",size:"xs"}})]},proxy:!0},{key:"error",fn:function(){return[a.$v.profileData.city.minLength?a._e():t("div",[a._v("\n                  Must contain at least 2 characters.\n                ")]),a.$v.profileData.city.maxLength?a._e():t("div",[a._v("\n                  Cannot be over 30 characters.\n                ")])]},proxy:!0}],null,!1,237290650),model:{value:a.$v.profileData.city.$model,callback:function(e){a.$set(a.$v.profileData.city,"$model",e)},expression:"$v.profileData.city.$model"}})],1),t("div",{staticClass:"q-pa-sm text-right"},[t("q-btn",{attrs:{disable:a.disableUpdateProfile,loading:a.submitting,label:"Update Account",type:"submit",color:"positive"},scopedSlots:a._u([{key:"loading",fn:function(){return[t("q-spinner-facebook")]},proxy:!0}],null,!1,4102112682)})],1)])])],1),a.showUpdatePwd?t("div",{staticClass:"col-lg-8"},[t("q-form",{staticClass:"q-gutter-md q-mt-sm",on:{submit:a.updatePassword}},[t("div",{staticClass:"row justify-start items-start"},[t("p",{staticClass:"q-ma-sm body-1 col-12"},[t("a",{staticClass:"cursor-pointer",on:{click:function(e){a.showUpdatePwd=!1}}},[a._v("Back to Account")])]),t("p",{staticClass:"q-ma-sm body-1 col-12"},[a._v("\n            Update Your Password\n          ")]),t("div",{staticClass:"col-12"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"","label-color":"accent",label:"Confirm Current Password",type:"password","lazy-rules":"",dense:"",hint:"Enter your current password.",error:a.$v.passwordData.currentPassword.$invalid&&a.$v.passwordData.currentPassword.$dirty,"error-message":""},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-lock",size:"xs"}})]},proxy:!0},{key:"error",fn:function(){return[a.$v.passwordData.currentPassword.required?a._e():t("div",[a._v("\n                  This field is required.\n                ")]),a.$v.passwordData.currentPassword.minLength?a._e():t("div",[a._v("\n                  Password must be at least 8 characters.\n                ")])]},proxy:!0}],null,!1,2812100923),model:{value:a.$v.passwordData.currentPassword.$model,callback:function(e){a.$set(a.$v.passwordData.currentPassword,"$model",e)},expression:"$v.passwordData.currentPassword.$model"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"","label-color":"accent",label:"New Password",type:"password","lazy-rules":"",dense:"",hint:"Create a password. 8 character minimum.",error:a.$v.passwordData.password.$invalid&&a.$v.passwordData.password.$dirty,"error-message":""},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-lock",size:"xs"}})]},proxy:!0},{key:"error",fn:function(){return[a.$v.passwordData.password.required?a._e():t("div",[a._v("\n                  This field is required.\n                ")]),a.$v.passwordData.password.minLength?a._e():t("div",[a._v("\n                  Password must be at least 8 characters.\n                ")])]},proxy:!0}],null,!1,4067433947),model:{value:a.$v.passwordData.password.$model,callback:function(e){a.$set(a.$v.passwordData.password,"$model",e)},expression:"$v.passwordData.password.$model"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"",type:"password","label-color":"accent",label:"Confirm New Password","lazy-rules":"",dense:"",hint:"Confirm new password",error:a.$v.passwordData.confirmPassword.$invalid&&a.$v.passwordData.confirmPassword.$dirty},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-lock",size:"xs"}})]},proxy:!0},{key:"error",fn:function(){return[a.$v.passwordData.confirmPassword.sameAsPassword?a._e():t("div",[a._v("\n                  Passwords must match.\n                ")])]},proxy:!0}],null,!1,748082573),model:{value:a.$v.passwordData.confirmPassword.$model,callback:function(e){a.$set(a.$v.passwordData.confirmPassword,"$model",e)},expression:"$v.passwordData.confirmPassword.$model"}})],1),t("div",{staticClass:"q-pa-sm text-right"},[t("q-btn",{attrs:{disable:a.disableUpdatePassword,loading:a.submitting,label:"Update Password",type:"submit",color:"positive"},scopedSlots:a._u([{key:"loading",fn:function(){return[t("q-spinner-facebook")]},proxy:!0}],null,!1,4102112682)})],1)])])],1):a._e(),a.showUpdateEmail?t("div",{staticClass:"col-lg-8"},[t("q-form",{staticClass:"q-gutter-md q-mt-sm",on:{submit:a.updateEmail}},[t("div",{staticClass:"row justify-start items-start"},[t("p",{staticClass:"q-ma-sm body-1 col-12"},[t("a",{staticClass:"cursor-pointer",on:{click:function(e){a.showUpdateEmail=!1}}},[a._v("Back to Account")])]),t("p",{staticClass:"q-ma-sm body-1 col-12"},[a._v("\n            Update Your Email - Email must be verified before account is\n            updated.\n          ")]),t("div",{staticClass:"col-12"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"","label-color":"accent",label:"Confirm Current Password",type:"password","lazy-rules":"",dense:"",hint:"Enter your current password.",error:a.$v.emailData.currentPassword.$invalid&&a.$v.emailData.currentPassword.$dirty,"error-message":""},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-lock",size:"xs"}})]},proxy:!0},{key:"error",fn:function(){return[a.$v.emailData.currentPassword.required?a._e():t("div",[a._v("\n                  This field is required.\n                ")]),a.$v.emailData.currentPassword.minLength?a._e():t("div",[a._v("\n                  Password must be at least 8 characters.\n                ")])]},proxy:!0}],null,!1,516762011),model:{value:a.$v.emailData.currentPassword.$model,callback:function(e){a.$set(a.$v.emailData.currentPassword,"$model",e)},expression:"$v.emailData.currentPassword.$model"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"","label-color":"accent",label:"Email",type:"email",hint:"Verifiable Email Address","lazy-rules":"",dense:"",error:a.$v.emailData.email.$invalid&&a.$v.emailData.email.$dirty},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-envelope",size:"xs"}})]},proxy:!0},{key:"error",fn:function(){return[a.$v.emailData.email.required?a._e():t("div",[a._v("\n                  This field is required.\n                ")]),a.$v.emailData.email.email?a._e():t("div",[a._v("\n                  Please provide a valid email address\n                ")])]},proxy:!0}],null,!1,4112735029),model:{value:a.$v.emailData.email.$model,callback:function(e){a.$set(a.$v.emailData.email,"$model",e)},expression:"$v.emailData.email.$model"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("q-input",{staticClass:"q-ma-sm",attrs:{outlined:"","label-color":"accent",label:"Confirm Email",type:"text","lazy-rules":"",hint:"Confirm email address",dense:"",error:a.$v.emailData.confirmEmail.$invalid&&a.$v.emailData.confirmEmail.$dirty},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{color:"accent",name:"fas fa-envelope",size:"xs"}})]},proxy:!0},{key:"error",fn:function(){return[a.$v.emailData.confirmEmail.sameAsEmail?a._e():t("div",[a._v("\n                  Emails must match.\n                ")])]},proxy:!0}],null,!1,1438264488),model:{value:a.$v.emailData.confirmEmail.$model,callback:function(e){a.$set(a.$v.emailData.confirmEmail,"$model",e)},expression:"$v.emailData.confirmEmail.$model"}})],1),t("div",{staticClass:"q-pa-sm text-right"},[t("q-btn",{attrs:{disable:a.disableUpdateEmail,loading:a.submitting,label:"Update Email",type:"submit",color:"positive"},scopedSlots:a._u([{key:"loading",fn:function(){return[t("q-spinner-facebook")]},proxy:!0}],null,!1,4102112682)})],1)])])],1):a._e()])},r=[],i=t("ded3"),n=t.n(i),o=t("2f62"),l=t("b5ae");const c=l["helpers"].regex("alpha",/^[a-zA-Z0-9 ]*$/);var d={data(){return{valid:!1,showUpdatePwd:!1,showUpdateEmail:!1,profileData:{firstname:"",lastname:"",company:"",city:""},emailData:{currentPassword:"",email:"",confirmEmail:""},passwordData:{password:"",confirmPassword:"",currentPassword:""}}},validations:{profileData:{firstname:{alpha:c,required:l["required"],minLength:Object(l["minLength"])(2),maxLength:Object(l["maxLength"])(30)},lastname:{alpha:c,required:l["required"],minLength:Object(l["minLength"])(2),maxLength:Object(l["maxLength"])(30)},company:{alpha:c,minLength:Object(l["minLength"])(2),maxLength:Object(l["maxLength"])(30)},city:{alpha:c,minLength:Object(l["minLength"])(2),maxLength:Object(l["maxLength"])(30)}},emailData:{currentPassword:{required:l["required"],minLength:Object(l["minLength"])(8)},email:{required:l["required"],email:l["email"]},confirmEmail:{sameAsEmail:Object(l["sameAs"])(a=>a.email)}},passwordData:{currentPassword:{required:l["required"],minLength:Object(l["minLength"])(8)},password:{required:l["required"],minLength:Object(l["minLength"])(8)},confirmPassword:{sameAsPassword:Object(l["sameAs"])(a=>a.password)}}},mounted:function(){this.setData()},computed:n()(n()({},Object(o["c"])({submitting:a=>a.auth.showLoading})),{},{showProfile(){return this.showUpdatePwd||this.showUpdateEmail},disableUpdateProfile(){return this.$v.profileData.$invalid},disableUpdatePassword(){return this.$v.passwordData.$invalid},disableUpdateEmail(){return this.$v.emailData.$invalid},currentEmail(){return this.$store.state.auth.user?this.$store.state.auth.user.email:null},currentDid(){return this.$store.state.auth.user?this.$store.state.auth.user.did.did:null},currentPushToken(){return this.$store.state.auth.user?this.$store.state.auth.user.pushToken:null}}),methods:{setData(){let a=this.$store.state.auth.user;a&&(this.profileData.firstname=a.firstname,this.profileData.lastname=a.lastname,this.profileData.city=a.city,this.profileData.company=a.company)},onSubmit(){this.$store.dispatch("account/updateProfile",{id:this.$store.state.auth.user._id,profileData:this.profileData})},updatePassword(){this.$store.dispatch("account/updatePasswordFromProfile",{email:this.currentEmail,oldPassword:this.passwordData.currentPassword,newPassword:this.passwordData.password}),this.passwordData.password="",this.passwordData.confirmPassword="",this.passwordData.currentPassword=""},updateEmail(){this.$store.dispatch("account/updateIdentity",{password:this.emailData.currentPassword,currentEmail:this.currentEmail,updatedEmail:this.emailData.email}),this.showUpdateEmail=!1,this.emailData.currentPassword="",this.emailData.email="",this.emailData.confirmEmail=""}}},m=d,u=(t("bfd2"),t("2877")),p=t("9989"),f=t("0378"),v=t("27f9"),$=t("0016"),h=t("9c40"),w=t("e669"),y=t("eebe"),b=t.n(y),D=Object(u["a"])(m,s,r,!1,null,null,null);e["default"]=D.exports;b()(D,"components",{QPage:p["a"],QForm:f["a"],QInput:v["a"],QIcon:$["a"],QBtn:h["a"],QSpinnerFacebook:w["a"]})},bfd2:function(a,e,t){"use strict";var s=t("33c3"),r=t.n(s);r.a}}]);